webpackJsonp([55],{Lb6B:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a={data:function(){return{visible:!1,dataForm:{productId:0,productName:"",description:"",price:"",stockQuantity:"",countryCode:"",productType:"",status:"",createTime:"",updateTime:""},countryCodes:[],productTypeCodes:[],dataRule:{productName:[{required:!0,message:"商品名称不能为空",trigger:"blur"}],description:[{required:!0,message:"商品描述不能为空",trigger:"blur"}],price:[{required:!0,message:"商品价格不能为空",trigger:"blur"}],stockQuantity:[{required:!0,message:"库存数量不能为空",trigger:"blur"}],countryCode:[{required:!0,message:"国号(区号)不能为空",trigger:"blur"}],productType:[{required:!0,message:"商品图片URL地址不能为空",trigger:"blur"}],status:[{required:!0,message:"商品状态（1上架 0下架）不能为空",trigger:"blur"}],createTime:[{required:!0,message:"创建时间不能为空",trigger:"blur"}],updateTime:[{required:!0,message:"最后更新时间不能为空",trigger:"blur"}]}}},methods:{init:function(t){var e=this;this.dataForm.productId=t||0,this.visible=!0,this.$nextTick(function(){e.$refs.dataForm.resetFields(),e.dataForm.productId&&e.$http({url:e.$http.adornUrl("/ltt/productinfo/info/"+e.dataForm.productId),method:"get",params:e.$http.adornParams()}).then(function(t){var r=t.data;r&&0===r.code&&(e.dataForm.productName=r.productInfo.productName,e.dataForm.description=r.productInfo.description,e.dataForm.price=r.productInfo.price,e.dataForm.stockQuantity=r.productInfo.stockQuantity,e.dataForm.countryCode=r.productInfo.countryCode,e.dataForm.productType=r.productInfo.productType,e.dataForm.status=r.productInfo.status,e.dataForm.createTime=r.productInfo.createTime,e.dataForm.updateTime=r.productInfo.updateTime)})}),this.getCountryCodes(),this.getProductTypeCodes()},dataFormSubmit:function(){var t=this;this.$refs.dataForm.validate(function(e){e&&t.$http({url:t.$http.adornUrl("/ltt/productinfo/"+(t.dataForm.productId?"update":"save")),method:"post",data:t.$http.adornData({productId:t.dataForm.productId||void 0,productName:t.dataForm.productName,description:t.dataForm.description,price:t.dataForm.price,stockQuantity:t.dataForm.stockQuantity,countryCode:t.dataForm.countryCode,productType:t.dataForm.productType,status:t.dataForm.status,createTime:t.dataForm.createTime,updateTime:t.dataForm.updateTime})}).then(function(e){var r=e.data;r&&0===r.code?t.$message({message:"操作成功",type:"success",duration:1500,onClose:function(){t.visible=!1,t.$emit("refreshDataList")}}):t.$message.error(r.msg)})})},getProductTypeCodes:function(){var t=this;this.$http({url:this.$http.adornUrl("/app/enums/getProductTypeCodes"),method:"get"}).then(function(e){var r=e.data;r&&0===r.code?t.productTypeCodes=r.data:t.$message.error(r.msg)})},getCountryCodes:function(){var t=this;this.$http({url:this.$http.adornUrl("/app/enums/countryCodes"),method:"get"}).then(function(e){var r=e.data;r&&0===r.code?t.countryCodes=r.data:t.$message.error(r.msg)})}}},o={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("el-dialog",{attrs:{title:t.dataForm.productId?"修改":"新增","close-on-click-modal":!1,visible:t.visible},on:{"update:visible":function(e){t.visible=e}}},[r("el-form",{ref:"dataForm",attrs:{model:t.dataForm,rules:t.dataRule,"label-width":"80px"},nativeOn:{keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key))return null;t.dataFormSubmit()}}},[r("el-form-item",{attrs:{label:"商品名称",prop:"productName"}},[r("el-input",{attrs:{placeholder:"商品名称"},model:{value:t.dataForm.productName,callback:function(e){t.$set(t.dataForm,"productName",e)},expression:"dataForm.productName"}})],1),t._v(" "),r("el-form-item",{attrs:{label:"商品类型",prop:"productType"}},[r("el-select",{attrs:{filterable:"",placeholder:"请选择商品类型"},model:{value:t.dataForm.productType,callback:function(e){t.$set(t.dataForm,"productType",e)},expression:"dataForm.productType"}},t._l(t.productTypeCodes,function(t){return r("el-option",{key:t.key,attrs:{label:t.value,value:t.key}})}))],1),t._v(" "),r("el-form-item",{attrs:{label:"商品描述",prop:"description"}},[r("el-input",{attrs:{placeholder:"商品描述"},model:{value:t.dataForm.description,callback:function(e){t.$set(t.dataForm,"description",e)},expression:"dataForm.description"}})],1),t._v(" "),r("el-form-item",{attrs:{label:"国号(区号)",prop:"countryCode"}},[r("el-select",{attrs:{filterable:"",placeholder:"请选择国家"},model:{value:t.dataForm.countryCode,callback:function(e){t.$set(t.dataForm,"countryCode",e)},expression:"dataForm.countryCode"}},t._l(t.countryCodes,function(t){return r("el-option",{key:t.value,attrs:{label:t.value,value:t.value}})}))],1),t._v(" "),r("el-form-item",{attrs:{label:"商品价格",prop:"price"}},[r("el-input",{attrs:{placeholder:"商品价格"},model:{value:t.dataForm.price,callback:function(e){t.$set(t.dataForm,"price",e)},expression:"dataForm.price"}})],1),t._v(" "),r("el-form-item",{attrs:{label:"库存数量",prop:"stockQuantity"}},[r("el-input",{attrs:{placeholder:"库存数量"},model:{value:t.dataForm.stockQuantity,callback:function(e){t.$set(t.dataForm,"stockQuantity",e)},expression:"dataForm.stockQuantity"}})],1)],1),t._v(" "),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(e){t.visible=!1}}},[t._v("取消")]),t._v(" "),r("el-button",{attrs:{type:"primary"},on:{click:function(e){t.dataFormSubmit()}}},[t._v("确定")])],1)],1)},staticRenderFns:[]},d=r("46Yf")(a,o,!1,null,null,null);e.default=d.exports}});